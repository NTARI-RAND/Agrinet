function createRouter() {
  const routes = [];
  const router = function () {};
  router.routes = routes;

  router.use = function (path, handler) {
    if (typeof path === 'function') {
      handler = path;
      path = '';
    }
    if (handler && handler.routes) {
      const base = path && path !== '/' ? path : '';
      handler.routes.forEach((r) => {
        routes.push({
          method: r.method,
          path: base + r.path,
          handler: r.handler,
        });
      });
    }
  };

  ['get', 'post', 'put', 'delete'].forEach((m) => {
    router[m] = function (path, handler) {
      routes.push({ method: m, path, handler });
    };
  });

  return router;
}

function express() {
  return createRouter();
}

express.Router = createRouter;
express.json = () => (_req, _res, next) => next();
express.static = () => (_req, _res, next) => next();

module.exports = express;

