let createSessionMock = async () => ({ url: 'session-url' });
let constructEventMock = () => ({ type: 'checkout.session.completed', data: { object: { metadata: { userId: 'test', amount: '1' } } } });

class Stripe {
  constructor() {
    this.checkout = {
      sessions: { create: (...args) => createSessionMock(...args) }
    };
    this.webhooks = {
      constructEvent: (...args) => constructEventMock(...args)
    };
  }
}

Stripe.__setMocks = ({ createSession, constructEvent } = {}) => {
  if (createSession) createSessionMock = createSession;
  if (constructEvent) constructEventMock = constructEvent;
};

module.exports = Stripe;
